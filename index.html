<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“š å®—æ•™èª²é¸æ“‡é¡Œæ¸¬é©—</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft JhengHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        h1 {
            color: white;
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        /* Lesson Selection Screen */
        #lesson-select {
            text-align: center;
        }

        .lesson-btn {
            display: block;
            width: 100%;
            max-width: 400px;
            margin: 15px auto;
            padding: 20px 30px;
            font-size: 18px;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .lesson-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.6);
        }

        .lesson-btn.selected {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            transform: scale(1.05);
        }

        .start-btn {
            margin-top: 30px;
            padding: 20px 60px;
            font-size: 22px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        /* Quiz Screen */
        #quiz-screen {
            display: none;
        }

        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #eee;
        }

        .quiz-info {
            font-size: 16px;
            color: #666;
        }

        .score {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }

        .question-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 20px;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            padding: 18px 25px;
            border: 2px solid #ddd;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 18px;
            background: white;
        }

        .option:hover {
            border-color: #667eea;
            background: #f0f3ff;
        }

        .option.correct {
            background: #d4edda;
            border-color: #28a745;
            color: #155724;
        }

        .option.wrong {
            background: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
        }

        .option.disabled {
            pointer-events: none;
        }

        /* Results Screen */
        #result-screen {
            display: none;
            text-align: center;
        }

        .result-score {
            font-size: 60px;
            color: #667eea;
            margin: 30px 0;
        }

        .result-message {
            font-size: 24px;
            margin-bottom: 30px;
            color: #333;
        }

        .back-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #eee;
            border-radius: 5px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 5px;
            transition: width 0.3s;
        }

        .feedback {
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            font-weight: bold;
            display: none;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: #d4edda;
            color: #155724;
        }

        .feedback.wrong {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“š å®—æ•™èª²é¸æ“‡é¡Œæ¸¬é©—</h1>

        <!-- Lesson Selection -->
        <div id="lesson-select" class="card">
            <h2 style="margin-bottom: 25px; color: #333;">è«‹é¸æ“‡è¦æ¸¬é©—çš„èª²æ–‡ï¼š</h2>
            <button class="lesson-btn" onclick="toggleLesson('lesson9')">ç¬¬ä¹èª² - å«‰å¦’å‚·äºº</button>
            <button class="lesson-btn" onclick="toggleLesson('lesson10')">ç¬¬åèª² - è²ªå¿ƒæ‹›ç¦</button>
            <button class="lesson-btn" onclick="toggleLesson('lesson11')">ç¬¬åä¸€èª² - ç´é˜¿æ›¼ (ç¦®ç‰©)</button>
            <button class="lesson-btn" onclick="toggleLesson('lesson12')">ç¬¬åäºŒèª² - ä»¥æ–¯å¸– (é™°è¬€)</button>
            <button class="lesson-btn" onclick="toggleLesson('lesson13')">ç¬¬åä¸‰èª² - è¿·è‰²è¼•è–„äºº</button>
            <button class="lesson-btn" onclick="toggleLesson('all')">ğŸ“‹ å…¨éƒ¨èª²æ–‡</button>

            <button class="lesson-btn start-btn" onclick="startQuiz()">ğŸš€ é–‹å§‹æ¸¬é©—</button>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen" class="card">
            <div class="quiz-header">
                <div class="quiz-info">
                    <span id="current-num">1</span>/<span id="total-num">10</span>
                </div>
                <div class="score">å¾—åˆ†ï¼š<span id="score">0</span></div>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="progress" style="width: 10%"></div>
            </div>

            <div class="question-card">
                <div class="question-text" id="question-text"></div>
                <div class="options" id="options"></div>
                <div class="feedback" id="feedback"></div>
            </div>
        </div>

        <!-- Result Screen -->
        <div id="result-screen" class="card">
            <h2>ğŸ‰ æ¸¬é©—å®Œæˆï¼</h2>
            <div class="result-score" id="final-score">0</div>
            <div class="result-message" id="result-message"></div>
            <button class="lesson-btn back-btn" onclick="backToMenu()">ğŸ”™ å›åˆ°ä¸»é¸å–®</button>
        </div>
    </div>

    <script>
        // Question Bank from ethan_test.pdf
        const questionBank = {
            lesson9: [
                {
                    question: "æ’’çƒè€³è¦‹è»æ°‘å’Œè‡£åƒ•éƒ½éå¸¸å–œæ„›é”å‘³ï¼Œæ–¼æ˜¯ï¼Ÿ",
                    options: ["A. æ„Ÿåˆ°å¾ˆé–‹å¿ƒ", "B. ååˆ†å«‰å¦’ä»–", "C. é€çµ¦ä»–å¾ˆå¤šç¦®ç‰©", "D. è®“ä»–åšç‹"],
                    correct: 1,
                    explanation: "æ’’çƒè€³è¦‹è»æ°‘å’Œè‡£åƒ•éƒ½éå¸¸å–œæ„›é”å‘³ï¼Œå¾é‚£ä¸€å¤©èµ·ï¼Œä¾¿å¸¸å«‰è¦–ä»–ã€‚"
                },
                {
                    question: "é”å‘³åœ¨å®®è£å½ˆç´çµ¦æ’’çƒè€³è½æ™‚ï¼Œæ’’çƒè€³ï¼Ÿ",
                    options: ["A. ç¨±è®šä»–çš„ç´è—", "B. çªç„¶æ‹¿èµ·é•·æ§æ“²å‘é”å‘³", "C. å«ä»–é›¢é–‹å®®æ®¿", "D. çµ¦ä»–çè³"],
                    correct: 1,
                    explanation: "æ’’çƒè€³çªç„¶æ‹¿èµ·ä¸€æ ¹é•·æ§ï¼Œå‘é”å‘³æ“²éå»ï¼Œæƒ³æŠŠä»–å…¨åœ¨ç‰†ä¸Šï¼Œé”å‘³é€£å¿™é¿é–‹ã€‚"
                },
                {
                    question: "æ’’çƒè€³æ˜¯ä»¥è‰²åˆ—æ­·å²ä¸Šç¬¬å¹¾ä½å›ç‹ï¼Ÿ",
                    options: ["A. ç¬¬ä¸€ä½", "B. ç¬¬äºŒä½", "C. ç¬¬ä¸‰ä½", "D. ç¬¬å››ä½"],
                    correct: 0,
                    explanation: "æ’’çƒè€³æ˜¯ä»¥è‰²åˆ—æ­·å²ä¸Šç¬¬ä¸€ä½å›ç‹ï¼Œç”±æ’’æ…•çˆ¾å…ˆçŸ¥æ‰€ç«‹ã€‚"
                },
                {
                    question: "é”å‘³å¾Œä¾†æˆç‚ºï¼Ÿ",
                    options: ["A. ä¸‹ä¸€ä½å›ç‹", "B. ç¥­å¸", "C. å…ˆçŸ¥", "D. å£«å…µé¦–é ˜"],
                    correct: 0,
                    explanation: "æ’’çƒè€³æ­»å¾Œï¼Œå¤©ä¸»è—‰è‘—å…ˆçŸ¥ä»»å‘½é”å‘³åšä»¥è‰²åˆ—çš„æ–°å›ç‹ã€‚"
                },
                {
                    question: "ã€Œæ•‘ä¸–ä¸»ã€æœƒåœ¨èª°çš„å¾Œè£”ä¸­å‡ºç¾ï¼Ÿ",
                    options: ["A. æ’’çƒè€³çš„å¾Œè£”", "B. é”å‘³çš„å¾Œè£”", "C. æ‘©è¥¿çš„å¾Œè£”", "D. æ‰€ç¾…é–€çš„å¾Œè£”"],
                    correct: 1,
                    explanation: "å½Œè³½äºï¼ˆæ•‘ä¸–ä¸»ï¼‰æœƒåœ¨é”å‘³çš„å¾Œè£”ä¸­å‡ºç¾ã€‚"
                }
            ],
            lesson10: [
                {
                    question: "ç´é˜¿æ›¼æ‚£äº†ä»€éº¼ç—…ï¼Ÿ",
                    options: ["A. ç™¼ç‡’", "B. ç™²ç—…", "C. éª¨æŠ˜", "D. çœ¼ç–¾"],
                    correct: 1,
                    explanation: "ç´é˜¿æ›¼æ‚£äº†ç™²ç—…ï¼Œé€™æ˜¯ç”±éº»ç˜‹æ¡¿èŒå¼•èµ·çš„çš®è†šå‚³æŸ“ç—…ã€‚"
                },
                {
                    question: "ç´é˜¿æ›¼çš„å©¢å¥³å»ºè­°ä»–å»æ±‚èª°é†«æ²»ï¼Ÿ",
                    options: ["A. å›ç‹", "B. å…ˆçŸ¥æ”é‡Œç¥¿", "C. ç¥­å¸", "D. é†«ç”Ÿ"],
                    correct: 1,
                    explanation: "ä»–çš„å©¢å¥³æ•™ä»–æ±‚å…ˆçŸ¥æ”é‡Œç¥¿é†«æ²»ã€‚"
                },
                {
                    question: "å…ˆçŸ¥å©å’ç´é˜¿æ›¼åˆ°å“ªæ¢æ²³æµ¸æ´—ä¸ƒæ¬¡ï¼Ÿ",
                    options: ["A. ç´„ä½†æ²³", "B. å°¼ç¾…æ²³", "C. å¹¼ç™¼æ‹‰åº•æ²³", "D. åº•æ ¼é‡Œæ–¯æ²³"],
                    correct: 0,
                    explanation: "å…ˆçŸ¥å©å’ä¸€å€‹ä½¿è€…å«ç´é˜¿æ›¼å°‡è»åˆ°ç´„ä½†æ²³è£æµ¸æ´—ä¸ƒæ¬¡ã€‚"
                },
                {
                    question: "ç´é˜¿æ›¼èµ·åˆå°å…ˆçŸ¥çš„å»ºè­°æœ‰ä»€éº¼åæ‡‰ï¼Ÿ",
                    options: ["A. å¾ˆæ¨‚æ„æ¥å—", "B. å¾ˆç”Ÿæ°£ä¸æƒ³ç†æœƒ", "C. ç«‹å³ç…§åš", "D. æ„Ÿè¬å…ˆçŸ¥"],
                    correct: 1,
                    explanation: "å°‡è»ä¾¿ç”Ÿæ°£ï¼Œå› å…ˆçŸ¥æ²’æœ‰è¦ªè‡ªè¦‹ä»–ï¼Œè€Œæ‰€è¦æ±‚çš„äº‹ä¹Ÿå¾ˆå¹³å¸¸ã€‚"
                },
                {
                    question: "ç´é˜¿æ›¼å¾Œä¾†è½èª°çš„å‹¸å‘Šå»æµ¸æ´—ï¼Ÿ",
                    options: ["A. å¦»å­", "B. åƒ•äºº", "C. å›ç‹", "D. å£«å…µ"],
                    correct: 1,
                    explanation: "ä»–çš„åƒ•äººå‹¸ä»–è¦ç…§è‘—å…ˆçŸ¥çš„è©±å»åšã€‚"
                }
            ],
            lesson11: [
                {
                    question: "å…ˆçŸ¥æ‹’çµ•æ¥å—ç´é˜¿æ›¼çš„ä»€éº¼ï¼Ÿ",
                    options: ["A. é‡‘å­", "B. éŠ€å­å’Œè¡£æœ", "C. æ‰€æœ‰ç¦®ç‰©", "D. é£Ÿç‰©"],
                    correct: 2,
                    explanation: "å…ˆçŸ¥æ‹’çµ•æ¥å—é‡‘å­ã€éŠ€å­å’Œè¡£æœä½œç‚ºç¦®ç‰©ã€‚"
                },
                {
                    question: "å…ˆçŸ¥çš„åƒ•äººåšäº†ä»€éº¼äº‹ï¼Ÿ",
                    options: ["A. æ”¶äº†ç´é˜¿æ›¼çš„ç¦®ç‰©", "B. è¶•èµ°ç´é˜¿æ›¼", "C. é†«æ²»ç—…äºº", "D. æ•™å°å…ˆçŸ¥"],
                    correct: 0,
                    explanation: "å…ˆçŸ¥çš„åƒ•äººæ”¶äº†ç´é˜¿æ›¼çš„ç¦®ç‰©ã€‚"
                },
                {
                    question: "å…ˆçŸ¥çŸ¥é“å¾Œå¦‚ä½•å°å¾…åƒ•äººï¼Ÿ",
                    options: ["A. ç¨±è®šä»–", "B. æ‡²ç½°ä»–", "C. åŸè«’ä»–", "D. è˜è«‹ä»–"],
                    correct: 1,
                    explanation: "æ”é‡Œç¥¿çŸ¥é“åƒ•äººæ”¶äº†ç¦®ç‰©ï¼Œä¾¿æ‡²ç½°ä»–èªªï¼šã€å¥½...é‚£ä½ é€£ä»–çš„ç™²ç—…ä¹Ÿæ¥æ”¶å§ï¼ã€"
                }
            ],
            lesson12: [
                {
                    question: "æ‘©çˆ¾å¾·é–‹æ˜¯å“ªä¸ªåœ‹å®¶çš„äººï¼Ÿ",
                    options: ["A. ä»¥è‰²åˆ—", "B. æ³¢æ–¯", "C. åŸƒåŠ", "D. å¸Œè‡˜"],
                    correct: 1,
                    explanation: "åœ¨æ³¢æ–¯åœ‹ï¼Œæœ‰ä¸€ä½ç†±å¿ƒæ­æ•¬å¤©ä¸»çš„çŒ¶å¤ªäººæ‘©çˆ¾å¾·é–‹ã€‚"
                },
                {
                    question: "æ‘©çˆ¾å¾·é–‹å¾Œä¾†æˆç‚ºäº†ä»€éº¼ï¼Ÿ",
                    options: ["A. å›ç‹", "B. å®°ç›¸", "C. ç¥­å¸", "D. å…ˆçŸ¥"],
                    correct: 1,
                    explanation: "å›ç‹é‚å§”æ´¾ä»–åœ¨æœå»·å…§ä¾›è·ï¼Œå¾Œä¾†æ›´ä»»å‘½æ‘©çˆ¾å¾·é–‹æ¥æ›¿å“ˆæ›¼åšå®°ç›¸ã€‚"
                },
                {
                    question: "å“ˆæ›¼è¦æ®ºæ­»èª°å’Œåœ‹å…§ä¸€åˆ‡çŒ¶å¤ªäººï¼Ÿ",
                    options: ["A. åªæœ‰å›ç‹", "B. åªæœ‰æ‘©çˆ¾å¾·é–‹", "C. æ‘©çˆ¾å¾·é–‹å’Œä¸€åˆ‡çŒ¶å¤ªäºº", "D. åªæœ‰çš‡å"],
                    correct: 2,
                    explanation: "å“ˆæ›¼æ±ºå®šè¦æ®ºæ­»æ‘©çˆ¾å¾·é–‹å’Œåœ‹å…§ä¸€åˆ‡çŒ¶å¤ªäººã€‚"
                },
                {
                    question: "èª°æˆç‚ºäº†ç‹åï¼Ÿ",
                    options: ["A. æ‘©çˆ¾å¾·é–‹çš„å¦»å­", "B. è‰¾æ–¯å¾·çˆ¾", "C. å“ˆæ›¼çš„å¥³å…’", "D. æ‘©çˆ¾å¾·é–‹çš„å§Šå¦¹"],
                    correct: 1,
                    explanation: "å›ç‹å¨¶äº†æ‘©çˆ¾å¾·é–‹çš„é¤Šå¥³è‰¾æ–¯å¾·çˆ¾åšç‹å¾Œã€‚"
                },
                {
                    question: "ã€ŒçŒ¶å¤ªäººã€é€™å€‹åç¨±ä¾†è‡ªå“ªè£¡ï¼Ÿ",
                    options: ["A. åŒ—åœ‹çš„ä»¥æ³•è“®æ”¯æ´¾", "B. å—åœ‹çš„çŒ¶å¤§æ”¯æ´¾", "C. æ±é‚Šçš„ä¾¿é›…æ†«æ”¯æ´¾", "D. è¥¿é‚Šçš„è¥¿ç·¬æ”¯æ´¾"],
                    correct: 1,
                    explanation: "ã€ŒçŒ¶å¤ªäººã€æ˜¯æŒ‡å—åœ‹çŒ¶å¤§æ”¯æ´¾çš„äººæ°‘ã€‚"
                }
            ],
            lesson13: [
                {
                    question: "è‹¥ç‘Ÿè¢«èª°è³£åˆ°åŸƒåŠï¼Ÿ",
                    options: ["A. å•†äºº", "B. å“¥å“¥å€‘", "C. åƒ•äºº", "D. é™Œç”Ÿäºº"],
                    correct: 1,
                    explanation: "é›…å„ä¼¯çš„å…’å­è‹¥ç‘Ÿè¢«åä½å“¥å“¥è³£å¾€åŸƒåŠã€‚"
                },
                {
                    question: "è‹¥ç‘Ÿçš„ä¸»äººå¦»å­å°ä»–æœ‰ä½•è¦æ±‚ï¼Ÿ",
                    options: ["A. è«‹ä»–åƒé£¯", "B. èˆ‡å¥¹åŒç¡", "C. æ•™ä»–è®€æ›¸", "D. å¹«å¥¹å·¥ä½œ"],
                    correct: 1,
                    explanation: "å¥³ä¸»äººè¦‹è‹¥ç‘Ÿå®¹è²Œä¿Šç¾ï¼Œå‘ä»–ä»¥ç›®å‚³æƒ…ï¼Œä¸¦èªªï¼šã€ä½ èˆ‡æˆ‘åŒç¡ç½·ï¼ã€"
                },
                {
                    question: "è‹¥ç‘Ÿå¦‚ä½•å›æ‡‰å¥³ä¸»äººçš„è¦æ±‚ï¼Ÿ",
                    options: ["A. ç­”æ‡‰å¥¹", "B. ç«‹å³æ‹’çµ•", "C. é›¢é–‹æˆ¿é–“", "D. å‘Šè¨´ä¸»äºº"],
                    correct: 1,
                    explanation: "è‹¥ç‘Ÿç«‹å³æ‹’çµ•ï¼Œèªªï¼šã€æˆ‘æ€èƒ½åšé€™æ¥µæƒ¡çš„äº‹ï¼Œå°ä¸»äººä¸å¿ ä¸ç¾©å‘¢ï¼Ÿã€"
                },
                {
                    question: "è‹¥ç‘Ÿæœ€å¾Œè¢«é—œé€²äº†å“ªè£¡ï¼Ÿ",
                    options: ["A. çš‡å®®", "B. ç›£ç„", "C. ç©€å€‰", "D. åƒ•äººæˆ¿"],
                    correct: 1,
                    explanation: "ä¸»äººè½å¾Œååˆ†ç”Ÿæ°£ï¼ŒæŠŠè‹¥ç‘Ÿé—œé€²ç›£ç„è£ã€‚"
                }
            ]
        };

        let selectedLessons = [];
        let currentQuestions = [];
        let currentIndex = 0;
        let score = 0;

        function toggleLesson(lesson) {
            const btn = event.target;
            if (lesson === 'all') {
                selectedLessons = Object.keys(questionBank);
                document.querySelectorAll('.lesson-btn').forEach(b => {
                    if (!b.classList.contains('start-btn')) {
                        b.classList.add('selected');
                    }
                });
                return;
            }

            if (selectedLessons.includes(lesson)) {
                selectedLessons = selectedLessons.filter(l => l !== lesson);
                btn.classList.remove('selected');
            } else {
                selectedLessons.push(lesson);
                btn.classList.add('selected');
            }
        }

        function startQuiz() {
            if (selectedLessons.length === 0) {
                alert('è«‹å…ˆé¸æ“‡è¦æ¸¬é©—çš„èª²æ–‡ï¼');
                return;
            }

            // Collect all questions from selected lessons
            currentQuestions = [];
            selectedLessons.forEach(lesson => {
                if (questionBank[lesson]) {
                    currentQuestions = currentQuestions.concat(questionBank[lesson]);
                }
            });

            // Shuffle questions
            currentQuestions = shuffleArray(currentQuestions);

            // Take max 15 questions
            currentQuestions = currentQuestions.slice(0, 15);

            if (currentQuestions.length === 0) {
                alert('æ²’æœ‰æ‰¾åˆ°é¡Œç›®ï¼');
                return;
            }

            currentIndex = 0;
            score = 0;

            document.getElementById('lesson-select').style.display = 'none';
            document.getElementById('quiz-screen').style.display = 'block';
            document.getElementById('total-num').textContent = currentQuestions.length;

            showQuestion();
        }

        function showQuestion() {
            const q = currentQuestions[currentIndex];

            document.getElementById('current-num').textContent = currentIndex + 1;
            document.getElementById('score').textContent = score;
            document.getElementById('question-text').textContent = q.question;

            const progress = ((currentIndex + 1) / currentQuestions.length) * 100;
            document.getElementById('progress').style.width = progress + '%';

            const optionsHtml = q.options.map((opt, i) =>
                `<div class="option" onclick="selectOption(${i})">${opt}</div>`
            ).join('');

            document.getElementById('options').innerHTML = optionsHtml;
            document.getElementById('feedback').className = 'feedback';
            document.getElementById('feedback').textContent = '';
        }

        function selectOption(index) {
            const q = currentQuestions[currentIndex];
            const options = document.querySelectorAll('.option');

            options.forEach((opt, i) => {
                opt.classList.add('disabled');
                if (i === q.correct) {
                    opt.classList.add('correct');
                } else if (i === index) {
                    opt.classList.add('wrong');
                }
            });

            const feedback = document.getElementById('feedback');
            feedback.className = 'feedback show';

            if (index === q.correct) {
                score += 10;
                document.getElementById('score').textContent = score;
                feedback.classList.add('correct');
                feedback.textContent = `âœ… æ­£ç¢ºï¼ ${q.explanation}`;
            } else {
                feedback.classList.add('wrong');
                feedback.textContent = `âŒ éŒ¯èª¤ï¼ æ­£ç¢ºç­”æ¡ˆä¿‚ï¼š${q.options[q.correct]} ${q.explanation}`;
            }

            setTimeout(() => {
                currentIndex++;
                if (currentIndex < currentQuestions.length) {
                    showQuestion();
                } else {
                    showResults();
                }
            }, 2500);
        }

        function showResults() {
            document.getElementById('quiz-screen').style.display = 'none';
            document.getElementById('result-screen').style.display = 'block';

            const maxScore = currentQuestions.length * 10;
            document.getElementById('final-score').textContent = `${score}/${maxScore}`;

            const percentage = (score / maxScore) * 100;
            let message = '';
            if (percentage >= 90) message = 'ğŸŒŸ è¶…ç´šå‹æªï¼';
            else if (percentage >= 70) message = 'ğŸ‘ å¥½çŠ€åˆ©ï¼';
            else if (percentage >= 50) message = 'ğŸ’ª å””éŒ¯å–ï¼';
            else message = 'ğŸ”¥ å†æ¥å†å²ï¼';

            document.getElementById('result-message').textContent = message;
        }

        function backToMenu() {
            document.getElementById('result-screen').style.display = 'none';
            document.getElementById('lesson-select').style.display = 'block';
            selectedLessons = [];
            document.querySelectorAll('.lesson-btn').forEach(b => b.classList.remove('selected'));
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
    </script>
</body>
</html>
