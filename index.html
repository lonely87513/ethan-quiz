<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“š é¸æ“‡é¡Œæ¸¬é©—ç³»çµ±</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft JhengHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        h1 {
            color: white;
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        /* Subject Selection Screen */
        #subject-select {
            text-align: center;
        }

        .section-title {
            font-size: 24px;
            color: #333;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        .subject-btn {
            display: block;
            width: 100%;
            max-width: 400px;
            margin: 15px auto;
            padding: 25px 30px;
            font-size: 20px;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        /* Subject colors */
        .subject-btn[data-subject="religion"] {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .subject-btn[data-subject="chinese"] {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        .subject-btn[data-subject="science"] {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .subject-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .subject-btn.selected {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(0,0,0,0.4);
        }

        .lesson-btn {
            display: block;
            width: 100%;
            max-width: 400px;
            margin: 10px auto;
            padding: 15px 25px;
            font-size: 16px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            background: #f0f3ff;
            color: #333;
            transition: all 0.3s;
        }

        .lesson-btn:hover {
            background: #667eea;
            color: white;
        }

        .lesson-btn.selected {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
        }

        .start-btn {
            margin-top: 30px;
            padding: 20px 60px;
            font-size: 22px;
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .start-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(17, 153, 142, 0.5);
        }

        /* Quiz Screen */
        #quiz-screen {
            display: none;
        }

        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #eee;
        }

        .quiz-info {
            font-size: 16px;
            color: #666;
        }

        .score {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }

        .question-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 20px;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            padding: 18px 25px;
            border: 2px solid #ddd;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 18px;
            background: white;
        }

        .option:hover {
            border-color: #667eea;
            background: #f0f3ff;
        }

        .option.correct {
            background: #d4edda;
            border-color: #28a745;
            color: #155724;
        }

        .option.wrong {
            background: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
        }

        .option.disabled {
            pointer-events: none;
        }

        /* Results Screen */
        #result-screen {
            display: none;
            text-align: center;
        }

        .result-score {
            font-size: 60px;
            color: #667eea;
            margin: 30px 0;
        }

        .result-message {
            font-size: 24px;
            margin-bottom: 30px;
            color: #333;
        }

        .back-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 18px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .back-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.5);
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #eee;
            border-radius: 5px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 5px;
            transition: width 0.3s;
        }

        .feedback {
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            font-weight: bold;
            display: none;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: #d4edda;
            color: #155724;
        }

        .feedback.wrong {
            background: #f8d7da;
            color: #721c24;
        }

        /* Hidden/Visible classes */
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“š é¸æ“‡é¡Œæ¸¬é©—ç³»çµ±</h1>

        <!-- Subject Selection -->
        <div id="subject-select" class="card">
            <h2 class="section-title">è«‹é¸æ“‡ç§‘ç›®ï¼š</h2>
            
            <button class="subject-btn" data-subject="religion" onclick="selectSubject('religion')">
                â›ª å®—æ•™ç§‘
            </button>
            
            <button class="subject-btn" data-subject="chinese" onclick="selectSubject('chinese')">
                ğŸ“– ä¸­æ–‡ç§‘
            </button>
            
            <button class="subject-btn" data-subject="science" onclick="selectSubject('science')">
                ğŸ”¬ å¸¸è­˜ç§‘
            </button>
        </div>

        <!-- Lesson Selection -->
        <div id="lesson-select" class="card hidden">
            <button class="lesson-btn" onclick="backToSubjects()" style="max-width: 150px; margin-bottom: 20px;">
                â† è¿”å›ç§‘ç›®
            </button>
            
            <h2 id="lessons-title" class="section-title">è«‹é¸æ“‡èª²æ–‡ï¼š</h2>
            
            <div id="lessons-container"></div>
            
            <button class="start-btn" onclick="startQuiz()">ğŸš€ é–‹å§‹æ¸¬é©—</button>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen" class="card">
            <div class="quiz-header">
                <div class="quiz-info">
                    <span id="current-num">1</span>/<span id="total-num">10</span>
                </div>
                <div class="score">å¾—åˆ†ï¼š<span id="score">0</span></div>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="progress" style="width: 10%"></div>
            </div>

            <div class="question-card">
                <div class="question-text" id="question-text"></div>
                <div class="options" id="options"></div>
                <div class="feedback" id="feedback"></div>
            </div>
        </div>

        <!-- Result Screen -->
        <div id="result-screen" class="card">
            <h2>ğŸ‰ æ¸¬é©—å®Œæˆï¼</h2>
            <div class="result-score" id="final-score">0</div>
            <div class="result-message" id="result-message"></div>
            <button class="back-btn" onclick="backToMenu()">ğŸ”™ å›åˆ°ä¸»é¸å–®</button>
        </div>
    </div>

    <script>
        // ============================================
        // ğŸ“š é¡Œåº« - å¯åœ¨æ­¤è™•æ–°å¢é¡Œç›®
        // ============================================
        const questionBank = {
            // â›ª å®—æ•™ç§‘
            religion: {
                lesson9: [
                    {
                        question: "æ’’çƒè€³è¦‹è»æ°‘å’Œè‡£åƒ•éƒ½éå¸¸å–œæ„›é”å‘³ï¼Œæ–¼æ˜¯ï¼Ÿ",
                        options: ["A. æ„Ÿåˆ°å¾ˆé–‹å¿ƒ", "B. ååˆ†å«‰å¦’ä»–", "C. é€çµ¦ä»–å¾ˆå¤šç¦®ç‰©", "D. è®“ä»–åšç‹"],
                        correct: 1,
                        explanation: "æ’’çƒè€³è¦‹è»æ°‘å’Œè‡£åƒ•éƒ½éå¸¸å–œæ„›é”å‘³ï¼Œå¾é‚£ä¸€å¤©èµ·ï¼Œä¾¿å¸¸å«‰è¦–ä»–ã€‚"
                    },
                    {
                        question: "é”å‘³åœ¨å®®è£å½ˆç´çµ¦æ’’çƒè€³è½æ™‚ï¼Œæ’’çƒè€³ï¼Ÿ",
                        options: ["A. ç¨±è®šä»–çš„ç´è—", "B. çªç„¶æ‹¿èµ·é•·æ§æ“²å‘é”å‘³", "C. å«ä»–é›¢é–‹å®®æ®¿", "D. çµ¦ä»–çè³"],
                        correct: 1,
                        explanation: "æ’’çƒè€³çªç„¶æ‹¿èµ·ä¸€æ ¹é•·æ§ï¼Œå‘é”å‘³æ“²éå»ï¼Œæƒ³æŠŠä»–å…¨åœ¨ç‰†ä¸Šï¼Œé”å‘³é€£å¿™é¿é–‹ã€‚"
                    },
                    {
                        question: "æ’’çƒè€³æ˜¯ä»¥è‰²åˆ—æ­·å²ä¸Šç¬¬å¹¾ä½å›ç‹ï¼Ÿ",
                        options: ["A. ç¬¬ä¸€ä½", "B. ç¬¬äºŒä½", "C. ç¬¬ä¸‰ä½", "D. ç¬¬å››ä½"],
                        correct: 0,
                        explanation: "æ’’çƒè€³æ˜¯ä»¥è‰²åˆ—æ­·å²ä¸Šç¬¬ä¸€ä½å›ç‹ï¼Œç”±æ’’æ…•çˆ¾å…ˆçŸ¥æ‰€ç«‹ã€‚"
                    },
                    {
                        question: "é”å‘³å¾Œä¾†æˆç‚ºï¼Ÿ",
                        options: ["A. ä¸‹ä¸€ä½å›ç‹", "B. ç¥­å¸", "C. å…ˆçŸ¥", "D. å£«å…µé¦–é ˜"],
                        correct: 0,
                        explanation: "æ’’çƒè€³æ­»å¾Œï¼Œå¤©ä¸»è—‰è‘—å…ˆçŸ¥ä»»å‘½é”å‘³åšä»¥è‰²åˆ—çš„æ–°å›ç‹ã€‚"
                    },
                    {
                        question: "ã€Œæ•‘ä¸–ä¸»ã€æœƒåœ¨èª°çš„å¾Œè£”ä¸­å‡ºç¾ï¼Ÿ",
                        options: ["A. æ’’çƒè€³çš„å¾Œè£”", "B. é”å‘³çš„å¾Œè£”", "C. æ‘©è¥¿çš„å¾Œè£”", "D. æ‰€ç¾…é–€çš„å¾Œè£”"],
                        correct: 1,
                        explanation: "å½Œè³½äºï¼ˆæ•‘ä¸–ä¸»ï¼‰æœƒåœ¨é”å‘³çš„å¾Œè£”ä¸­å‡ºç¾ã€‚"
                    }
                ],
                lesson10: [
                    {
                        question: "ç´é˜¿æ›¼æ‚£äº†ä»€éº¼ç—…ï¼Ÿ",
                        options: ["A. ç™¼ç‡’", "B. ç™²ç—…", "C. éª¨æŠ˜", "D. çœ¼ç–¾"],
                        correct: 1,
                        explanation: "ç´é˜¿æ›¼æ‚£äº†ç™²ç—…ï¼Œé€™æ˜¯ç”±éº»ç˜‹æ¡¿èŒå¼•èµ·çš„çš®è†šå‚³æŸ“ç—…ã€‚"
                    },
                    {
                        question: "ç´é˜¿æ›¼çš„å©¢å¥³å»ºè­°ä»–å»æ±‚èª°é†«æ²»ï¼Ÿ",
                        options: ["A. å›ç‹", "B. å…ˆçŸ¥æ”é‡Œç¥¿", "C. ç¥­å¸", "D. é†«ç”Ÿ"],
                        correct: 1,
                        explanation: "ä»–çš„å©¢å¥³æ•™ä»–æ±‚å…ˆçŸ¥æ”é‡Œç¥¿é†«æ²»ã€‚"
                    },
                    {
                        question: "å…ˆçŸ¥å©å’ç´é˜¿æ›¼åˆ°å“ªæ¢æ²³æµ¸æ´—ä¸ƒæ¬¡ï¼Ÿ",
                        options: ["A. ç´„ä½†æ²³", "B. å°¼ç¾…æ²³", "C. å¹¼ç™¼æ‹‰åº•æ²³", "D. åº•æ ¼é‡Œæ–¯æ²³"],
                        correct: 0,
                        explanation: "å…ˆçŸ¥å©å’ä¸€å€‹ä½¿è€…å«ç´é˜¿æ›¼å°‡è»åˆ°ç´„ä½†æ²³è£æµ¸æ´—ä¸ƒæ¬¡ã€‚"
                    },
                    {
                        question: "ç´é˜¿æ›¼èµ·åˆå°å…ˆçŸ¥çš„å»ºè­°æœ‰ä»€éº¼åæ‡‰ï¼Ÿ",
                        options: ["A. å¾ˆæ¨‚æ„æ¥å—", "B. å¾ˆç”Ÿæ°£ä¸æƒ³ç†æœƒ", "C. ç«‹å³ç…§åš", "D. æ„Ÿè¬å…ˆçŸ¥"],
                        correct: 1,
                        explanation: "å°‡è»ä¾¿ç”Ÿæ°£ï¼Œå› å…ˆçŸ¥æ²’æœ‰è¦ªè‡ªè¦‹ä»–ï¼Œè€Œæ‰€è¦æ±‚çš„äº‹ä¹Ÿå¾ˆå¹³å¸¸ã€‚"
                    },
                    {
                        question: "ç´é˜¿æ›¼å¾Œä¾†è½èª°çš„å‹¸å‘Šå»æµ¸æ´—ï¼Ÿ",
                        options: ["A. å¦»å­", "B. åƒ•äºº", "C. å›ç‹", "D. å£«å…µ"],
                        correct: 1,
                        explanation: "ä»–çš„åƒ•äººå‹¸ä»–è¦ç…§è‘—å…ˆçŸ¥çš„è©±å»åšã€‚"
                    }
                ],
                lesson11: [
                    {
                        question: "å…ˆçŸ¥æ‹’çµ•æ¥å—ç´é˜¿æ›¼çš„ä»€éº¼ï¼Ÿ",
                        options: ["A. é‡‘å­", "B. éŠ€å­å’Œè¡£æœ", "C. æ‰€æœ‰ç¦®ç‰©", "D. é£Ÿç‰©"],
                        correct: 2,
                        explanation: "å…ˆçŸ¥æ‹’çµ•æ¥å—é‡‘å­ã€éŠ€å­å’Œè¡£æœä½œç‚ºç¦®ç‰©ã€‚"
                    },
                    {
                        question: "å…ˆçŸ¥çš„åƒ•äººåšäº†ä»€éº¼äº‹ï¼Ÿ",
                        options: ["A. æ”¶äº†ç´é˜¿æ›¼çš„ç¦®ç‰©", "B. è¶•èµ°ç´é˜¿æ›¼", "C. é†«æ²»ç—…äºº", "D. æ•™å°å…ˆçŸ¥"],
                        correct: 0,
                        explanation: "å…ˆçŸ¥çš„åƒ•äººæ”¶äº†ç´é˜¿æ›¼çš„ç¦®ç‰©ã€‚"
                    },
                    {
                        question: "å…ˆçŸ¥çŸ¥é“å¾Œå¦‚ä½•å°å¾…åƒ•äººï¼Ÿ",
                        options: ["A. ç¨±è®šä»–", "B. æ‡²ç½°ä»–", "C. åŸè«’ä»–", "D. è˜è«‹ä»–"],
                        correct: 1,
                        explanation: "æ”é‡Œç¥¿çŸ¥é“åƒ•äººæ”¶äº†ç¦®ç‰©ï¼Œä¾¿æ‡²ç½°ä»–èªªï¼šã€å¥½...é‚£ä½ é€£ä»–çš„ç™²ç—…ä¹Ÿæ¥æ”¶å§ï¼ã€"
                    }
                ],
                lesson12: [
                    {
                        question: "æ‘©çˆ¾å¾·é–‹æ˜¯å“ªä¸ªåœ‹å®¶çš„äººï¼Ÿ",
                        options: ["A. ä»¥è‰²åˆ—", "B. æ³¢æ–¯", "C. åŸƒåŠ", "D. å¸Œè‡˜"],
                        correct: 1,
                        explanation: "åœ¨æ³¢æ–¯åœ‹ï¼Œæœ‰ä¸€ä½ç†±å¿ƒæ­æ•¬å¤©ä¸»çš„çŒ¶å¤ªäººæ‘©çˆ¾å¾·é–‹ã€‚"
                    },
                    {
                        question: "æ‘©çˆ¾å¾·é–‹å¾Œä¾†æˆç‚ºäº†ä»€éº¼ï¼Ÿ",
                        options: ["A. å›ç‹", "B. å®°ç›¸", "C. ç¥­å¸", "D. å…ˆçŸ¥"],
                        correct: 1,
                        explanation: "å›ç‹é‚å§”æ´¾ä»–åœ¨æœå»·å…§ä¾›è·ï¼Œå¾Œä¾†æ›´ä»»å‘½æ‘©çˆ¾å¾·é–‹æ¥æ›¿å“ˆæ›¼åšå®°ç›¸ã€‚"
                    },
                    {
                        question: "å“ˆæ›¼è¦æ®ºæ­»èª°å’Œåœ‹å…§ä¸€åˆ‡çŒ¶å¤ªäººï¼Ÿ",
                        options: ["A. åªæœ‰å›ç‹", "B. åªæœ‰æ‘©çˆ¾å¾·é–‹", "C. æ‘©çˆ¾å¾·é–‹å’Œä¸€åˆ‡çŒ¶å¤ªäºº", "D. åªæœ‰çš‡å"],
                        correct: 2,
                        explanation: "å“ˆæ›¼æ±ºå®šè¦æ®ºæ­»æ‘©çˆ¾å¾·é–‹å’Œåœ‹å…§ä¸€åˆ‡çŒ¶å¤ªäººã€‚"
                    },
                    {
                        question: "èª°æˆç‚ºäº†ç‹åï¼Ÿ",
                        options: ["A. æ‘©çˆ¾å¾·é–‹çš„å¦»å­", "B. è‰¾æ–¯å¾·çˆ¾", "C. å“ˆæ›¼çš„å¥³å…’", "D. æ‘©çˆ¾å¾·é–‹çš„å§Šå¦¹"],
                        correct: 1,
                        explanation: "å›ç‹å¨¶äº†æ‘©çˆ¾å¾·é–‹çš„é¤Šå¥³è‰¾æ–¯å¾·çˆ¾åšç‹å¾Œã€‚"
                    },
                    {
                        question: "ã€ŒçŒ¶å¤ªäººã€é€™å€‹åç¨±ä¾†è‡ªå“ªè£¡ï¼Ÿ",
                        options: ["A. åŒ—åœ‹çš„ä»¥æ³•è“®æ”¯æ´¾", "B. å—åœ‹çš„çŒ¶å¤§æ”¯æ´¾", "C. æ±é‚Šçš„ä¾¿é›…æ†«æ”¯æ´¾", "D. è¥¿é‚Šçš„è¥¿ç·¬æ”¯æ´¾"],
                        correct: 1,
                        explanation: "ã€ŒçŒ¶å¤ªäººã€æ˜¯æŒ‡å—åœ‹çŒ¶å¤§æ”¯æ´¾çš„äººæ°‘ã€‚"
                    }
                ],
                lesson13: [
                    {
                        question: "è‹¥ç‘Ÿè¢«èª°è³£åˆ°åŸƒåŠï¼Ÿ",
                        options: ["A. å•†äºº", "B. å“¥å“¥å€‘", "C. åƒ•äºº", "D. é™Œç”Ÿäºº"],
                        correct: 1,
                        explanation: "é›…å„ä¼¯çš„å…’å­è‹¥ç‘Ÿè¢«åä½å“¥å“¥è³£å¾€åŸƒåŠã€‚"
                    },
                    {
                        question: "è‹¥ç‘Ÿçš„ä¸»äººå¦»å­å°ä»–æœ‰ä½•è¦æ±‚ï¼Ÿ",
                        options: ["A. è«‹ä»–åƒé£¯", "B. èˆ‡å¥¹åŒç¡", "C. æ•™ä»–è®€æ›¸", "D. å¹«å¥¹å·¥ä½œ"],
                        correct: 1,
                        explanation: "å¥³ä¸»äººè¦‹è‹¥ç‘Ÿå®¹è²Œä¿Šç¾ï¼Œå‘ä»–ä»¥ç›®å‚³æƒ…ï¼Œä¸¦èªªï¼šã€ä½ èˆ‡æˆ‘åŒç¡ç½·ï¼ã€"
                    },
                    {
                        question: "è‹¥ç‘Ÿå¦‚ä½•å›æ‡‰å¥³ä¸»äººçš„è¦æ±‚ï¼Ÿ",
                        options: ["A. ç­”æ‡‰å¥¹", "B. ç«‹å³æ‹’çµ•", "C. é›¢é–‹æˆ¿é–“", "D. å‘Šè¨´ä¸»äºº"],
                        correct: 1,
                        explanation: "è‹¥ç‘Ÿç«‹å³æ‹’çµ•ï¼Œèªªï¼šã€æˆ‘æ€èƒ½åšé€™æ¥µæƒ¡çš„äº‹ï¼Œå°ä¸»äººä¸å¿ ä¸ç¾©å‘¢ï¼Ÿã€"
                    },
                    {
                        question: "è‹¥ç‘Ÿæœ€å¾Œè¢«é—œé€²äº†å“ªè£¡ï¼Ÿ",
                        options: ["A. çš‡å®®", "B. ç›£ç„", "C. ç©€å€‰", "D. åƒ•äººæˆ¿"],
                        correct: 1,
                        explanation: "ä¸»äººè½å¾Œååˆ†ç”Ÿæ°£ï¼ŒæŠŠè‹¥ç‘Ÿé—œé€²ç›£ç„è£ã€‚"
                    }
                ]
            },
            
            // ğŸ“– ä¸­æ–‡ç§‘ - é ç•™ä½ç½®
            chinese: {
                lesson1: [
                    {
                        question: "ï¼ˆæ­¤ç‚ºç¯„ä¾‹ï¼‰ä»¥ä¸‹å“ªå€‹æ˜¯å”è©©ï¼Ÿ",
                        options: ["A. æ˜¥æ›‰", "B. éœå¤œæ€", "C. ç™»é¸›é›€æ¨“", "D. å…¨éƒ¨éƒ½æ˜¯"],
                        correct: 3,
                        explanation: "æ˜¥æ›‰ã€éœå¤œæ€ã€ç™»é¸›é›€æ¨“éƒ½æ˜¯è‘—åå”è©©ã€‚"
                    }
                ]
            },
            
            // ğŸ”¬ å¸¸è­˜ç§‘ - é ç•™ä½ç½®
            science: {
                lesson1: [
                    {
                        question: "ï¼ˆæ­¤ç‚ºç¯„ä¾‹ï¼‰æ¤ç‰©éœ€è¦ä»€éº¼æ‰èƒ½ç”Ÿé•·ï¼Ÿ",
                        options: ["A. é™½å…‰", "B. æ°´", "C. æ³¥åœŸ", "D. å…¨éƒ¨éƒ½éœ€è¦"],
                        correct: 3,
                        explanation: "æ¤ç‰©éœ€è¦é™½å…‰ã€æ°´åˆ†å’Œæ³¥åœŸä¸­çš„é¤Šåˆ†æ‰èƒ½å¥åº·ç”Ÿé•·ã€‚"
                    }
                ]
            }
        };

        // èª²æ–‡åç¨±å°ç…§è¡¨
        const lessonNames = {
            religion: {
                lesson9: "ç¬¬ä¹èª² - å«‰å¦’å‚·äºº",
                lesson10: "ç¬¬åèª² - è²ªå¿ƒæ‹›ç¦",
                lesson11: "ç¬¬åä¸€èª² - ç´é˜¿æ›¼ (ç¦®ç‰©)",
                lesson12: "ç¬¬åäºŒèª² - ä»¥æ–¯å¸– (é™°è¬€)",
                lesson13: "ç¬¬åä¸‰èª² - è¿·è‰²è¼•è–„äºº"
            },
            chinese: {
                lesson1: "ç¬¬ä¸€èª² - ï¼ˆå¾…è¼¸å…¥ï¼‰"
            },
            science: {
                lesson1: "ç¬¬ä¸€èª² - ï¼ˆå¾…è¼¸å…¥ï¼‰"
            }
        };

        let currentSubject = null;
        let selectedLessons = [];
        let currentQuestions = [];
        let currentIndex = 0;
        let score = 0;

        // é¸æ“‡ç§‘ç›®
        function selectSubject(subject) {
            currentSubject = subject;
            
            // æ›´æ–°æŒ‰éˆ•æ¨£å¼
            document.querySelectorAll('.subject-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            document.querySelector(`[data-subject="${subject}"]`).classList.add('selected');
            
            // é¡¯ç¤ºèª²æ–‡é¸æ“‡
            showLessonSelect();
        }

        // é¡¯ç¤ºèª²æ–‡é¸æ“‡é é¢
        function showLessonSelect() {
            document.getElementById('subject-select').classList.add('hidden');
            document.getElementById('lesson-select').classList.remove('hidden');
            
            // æ›´æ–°æ¨™é¡Œ
            const subjectNames = {
                religion: "â›ª å®—æ•™ç§‘",
                chinese: "ğŸ“– ä¸­æ–‡ç§‘",
                science: "ğŸ”¬ å¸¸è­˜ç§‘"
            };
            document.getElementById('lessons-title').textContent = `${subjectNames[currentSubject]} - è«‹é¸æ“‡èª²æ–‡ï¼š`;
            
            // ç”Ÿæˆèª²æ–‡æŒ‰éˆ•
            const container = document.getElementById('lessons-container');
            container.innerHTML = '';
            
            const lessons = questionBank[currentSubject];
            for (const [lessonId, lessonData] of Object.entries(lessons)) {
                const name = lessonNames[currentSubject][lessonId] || lessonId;
                const count = lessonData.length;
                const btn = document.createElement('button');
                btn.className = 'lesson-btn';
                btn.dataset.lesson = lessonId;
                btn.innerHTML = `${name} <small style="color: #666;">(${count}é¡Œ)</small>`;
                btn.onclick = () => toggleLesson(lessonId, btn);
                container.appendChild(btn);
            }
            
            // åŠ å…¥å…¨é¸æŒ‰éˆ•
            const allBtn = document.createElement('button');
            allBtn.className = 'lesson-btn';
            allBtn.innerHTML = 'ğŸ“‹ å…¨éƒ¨èª²æ–‡';
            allBtn.onclick = () => toggleAllLessons();
            container.appendChild(allBtn);
        }

        // é¸æ“‡/å–æ¶ˆé¸æ“‡èª²æ–‡
        function toggleLesson(lessonId, btn) {
            if (selectedLessons.includes(lessonId)) {
                selectedLessons = selectedLessons.filter(l => l !== lessonId);
                btn.classList.remove('selected');
            } else {
                selectedLessons.push(lessonId);
                btn.classList.add('selected');
            }
        }

        // å…¨é¸/å–æ¶ˆå…¨é¸
        function toggleAllLessons() {
            const allBtns = document.querySelectorAll('#lessons-container .lesson-btn');
            
            if (selectedLessons.length === allBtns.length - 1) { // -1 for "å…¨éƒ¨èª²æ–‡" button
                // å–æ¶ˆå…¨é¸
                selectedLessons = [];
                allBtns.forEach(btn => btn.classList.remove('selected'));
            } else {
                // å…¨é¸
                selectedLessons = [];
                allBtns.forEach(btn => {
                    const lessonId = btn.dataset.lesson;
                    if (lessonId) {
                        selectedLessons.push(lessonId);
                        btn.classList.add('selected');
                    }
                });
            }
        }

        // è¿”å›ç§‘ç›®é¸æ“‡
        function backToSubjects() {
            currentSubject = null;
            selectedLessons = [];
            document.getElementById('lesson-select').classList.add('hidden');
            document.getElementById('subject-select').classList.remove('hidden');
            document.querySelectorAll('.subject-btn').forEach(btn => btn.classList.remove('selected'));
        }

        // é–‹å§‹æ¸¬é©—
        function startQuiz() {
            if (selectedLessons.length === 0) {
                alert('è«‹å…ˆé¸æ“‡è¦æ¸¬é©—çš„èª²æ–‡ï¼');
                return;
            }

            // æ”¶é›†æ‰€æœ‰é¡Œç›®
            currentQuestions = [];
            selectedLessons.forEach(lesson => {
                if (questionBank[currentSubject] && questionBank[currentSubject][lesson]) {
                    currentQuestions = currentQuestions.concat(questionBank[currentSubject][lesson]);
                }
            });

            // éš¨æ©Ÿæ’åº
            currentQuestions = shuffleArray(currentQuestions);

            // æœ€å¤š15é¡Œ
            currentQuestions = currentQuestions.slice(0, 15);

            if (currentQuestions.length === 0) {
                alert('æ²’æœ‰æ‰¾åˆ°é¡Œç›®ï¼');
                return;
            }

            currentIndex = 0;
            score = 0;

            document.getElementById('lesson-select').classList.add('hidden');
            document.getElementById('quiz-screen').style.display = 'block';
            document.getElementById('total-num').textContent = currentQuestions.length;

            showQuestion();
        }

        // é¡¯ç¤ºé¡Œç›®
        function showQuestion() {
            const q = currentQuestions[currentIndex];

            document.getElementById('current-num').textContent = currentIndex + 1;
            document.getElementById('score').textContent = score;
            document.getElementById('question-text').textContent = q.question;

            const progress = ((currentIndex + 1) / currentQuestions.length) * 100;
            document.getElementById('progress').style.width = progress + '%';

            const optionsHtml = q.options.map((opt, i) =>
                `<div class="option" onclick="selectOption(${i})">${opt}</div>`
            ).join('');

            document.getElementById('options').innerHTML = optionsHtml;
            document.getElementById('feedback').className = 'feedback';
            document.getElementById('feedback').textContent = '';
        }

        // é¸æ“‡ç­”æ¡ˆ
        function selectOption(index) {
            const q = currentQuestions[currentIndex];
            const options = document.querySelectorAll('.option');

            options.forEach((opt, i) => {
                opt.classList.add('disabled');
                if (i === q.correct) {
                    opt.classList.add('correct');
                } else if (i === index) {
                    opt.classList.add('wrong');
                }
            });

            const feedback = document.getElementById('feedback');
            feedback.className = 'feedback show';

            if (index === q.correct) {
                score += 10;
                document.getElementById('score').textContent = score;
                feedback.classList.add('correct');
                feedback.textContent = `âœ… æ­£ç¢ºï¼ ${q.explanation}`;
            } else {
                feedback.classList.add('wrong');
                feedback.textContent = `âŒ éŒ¯èª¤ï¼ æ­£ç¢ºç­”æ¡ˆä¿‚ï¼š${q.options[q.correct]} ${q.explanation}`;
            }

            setTimeout(() => {
                currentIndex++;
                if (currentIndex < currentQuestions.length) {
                    showQuestion();
                } else {
                    showResults();
                }
            }, 2500);
        }

        // é¡¯ç¤ºçµæœ
        function showResults() {
            document.getElementById('quiz-screen').style.display = 'none';
            document.getElementById('result-screen').style.display = 'block';

            const maxScore = currentQuestions.length * 10;
            document.getElementById('final-score').textContent = `${score}/${maxScore}`;

            const percentage = (score / maxScore) * 100;
            let message = '';
            if (percentage >= 90) message = 'ğŸŒŸ è¶…ç´šå‹æªï¼';
            else if (percentage >= 70) message = 'ğŸ‘ å¥½çŠ€åˆ©ï¼';
            else if (percentage >= 50) message = 'ğŸ’ª å””éŒ¯å–ï¼';
            else message = 'ğŸ”¥ å†æ¥å†å²ï¼';

            document.getElementById('result-message').textContent = message;
        }

        // è¿”å›ä¸»é¸å–®
        function backToMenu() {
            document.getElementById('result-screen').style.display = 'none';
            currentSubject = null;
            selectedLessons = [];
            document.querySelectorAll('.lesson-btn').forEach(b => b.classList.remove('selected'));
            document.querySelectorAll('.subject-btn').forEach(b => b.classList.remove('selected'));
            document.getElementById('lesson-select').classList.add('hidden');
            document.getElementById('subject-select').classList.remove('hidden');
        }

        // éš¨æ©Ÿæ’åº
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
    </script>
</body>
</html>
